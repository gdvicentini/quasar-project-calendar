<template>
  <div class="subcontent">
    <div class="row justify-center">
      <div style="display: flex; max-width: 800px; width: 100%; height: 400px">
        <q-calendar-agenda
          ref="calendar"
          v-model="selectedDate"
          view="week"
          :left-column-options="leftColumnOptions"
          :right-column-options="rightColumnOptions"
          :weekdays="[1, 2, 3, 4, 5]"
          :day-min-height="200"
          bordered
          animated
          locale="pt-br"
          @change="onChange"
          @moved="onMoved"
          @click-date="onClickDate"
          @click-time="onClickTime"
          @click-interval="onClickInterval"
          @click-head-intervals="onClickHeadIntervals"
          @click-head-day="onClickHeadDay"
        >
          <template #day="{ scope: { timestamp } }">
            <template
              v-for="a in getAgenda(timestamp)"
              :key="timestamp.date + a.time"
            >
              <div
                :label="a.time"
                class="justify-start q-ma-sm shadow-5 bg-grey-6"
                style="margin-top: 25px"
              >
                <div
                  v-if="a.avatar"
                  class="row justify-center"
                  style="margin-top: 30px; width: 100%"
                >
                  <q-avatar
                    style="
                      margin-top: -50px;
                      margin-bottom: 10px;
                      font-size: 60px;
                    "
                  >
                    <img :src="a.avatar" style="border: #9e9e9e solid 5px" />
                  </q-avatar>
                </div>
                <div class="col-12 q-px-sm">
                  <strong>{{ a.time }}</strong>
                </div>
                <div
                  v-if="a.desc"
                  class="col-12 q-px-sm"
                  style="font-size: 10px"
                >
                  {{ a.desc }}
                </div>
              </div>
            </template>
          </template>
        </q-calendar-agenda>
      </div>
    </div>
  </div>
</template>

<script>
import {
  QCalendarAgenda,
  today,
} from "@quasar/quasar-ui-qcalendar/src/index.js";

import { defineComponent } from "vue";

export default defineComponent({
  name: "AgendaColumnOptions",
  components: {
    QCalendarAgenda,
  },
  data() {
    return {
      selectedDate: today(),
      agenda: {
        // value represents day of the week
        1: [
          {
            time: "08:00",
            avatar: "https://cdn.quasar.dev/img/boy-avatar.png",
            desc: "Meeting with CEO",
          },
          {
            time: "08:30",
            avatar: "https://cdn.quasar.dev/img/avatar.png",
            desc: "Meeting with HR",
          },
          {
            time: "10:00",
            avatar: "https://cdn.quasar.dev/img/avatar1.jpg",
            desc: "Meeting with Karen",
          },
        ],
        2: [
          {
            time: "11:30",
            avatar: "https://cdn.quasar.dev/img/avatar2.jpg",
            desc: "Meeting with Alisha",
          },
          {
            time: "17:00",
            avatar: "https://cdn.quasar.dev/img/avatar3.jpg",
            desc: "Meeting with Sarah",
          },
        ],
        3: [
          {
            time: "08:00",
            desc: "Stand-up SCRUM",
            avatar: "https://cdn.quasar.dev/img/material.png",
          },
          {
            time: "09:00",
            avatar: "https://cdn.quasar.dev/img/boy-avatar.png",
          },
          {
            time: "10:00",
            desc: "Sprint planning",
            avatar: "https://cdn.quasar.dev/img/material.png",
          },
          {
            time: "13:00",
            avatar: "https://cdn.quasar.dev/img/avatar1.jpg",
          },
        ],
        4: [
          {
            time: "09:00",
            avatar: "https://cdn.quasar.dev/img/avatar3.jpg",
          },
          {
            time: "10:00",
            avatar: "https://cdn.quasar.dev/img/avatar2.jpg",
          },
          {
            time: "13:00",
            avatar: "https://cdn.quasar.dev/img/material.png",
          },
        ],
        5: [
          {
            time: "08:00",
            avatar: "https://cdn.quasar.dev/img/boy-avatar.png",
          },
          {
            time: "09:00",
            avatar: "https://cdn.quasar.dev/img/avatar2.jpg",
          },
          {
            time: "09:30",
            avatar: "https://cdn.quasar.dev/img/avatar4.jpg",
          },
          {
            time: "10:00",
            avatar: "https://cdn.quasar.dev/img/avatar5.jpg",
          },
          {
            time: "11:30",
            avatar: "https://cdn.quasar.dev/img/material.png",
          },
          {
            time: "13:00",
            avatar: "https://cdn.quasar.dev/img/avatar6.jpg",
          },
          {
            time: "13:30",
            avatar: "https://cdn.quasar.dev/img/avatar3.jpg",
          },
          {
            time: "14:00",
            avatar: "https://cdn.quasar.dev/img/linux-avatar.png",
          },
          {
            time: "14:30",
            avatar: "https://cdn.quasar.dev/img/avatar.png",
          },
          {
            time: "15:00",
            avatar: "https://cdn.quasar.dev/img/boy-avatar.png",
          },
          {
            time: "15:30",
            avatar: "https://cdn.quasar.dev/img/avatar2.jpg",
          },
          {
            time: "16:00",
            avatar: "https://cdn.quasar.dev/img/avatar6.jpg",
          },
        ],
      },
      leftColumnOptions: [
        {
          id: "over-due",
          label: "Over Due",
        },
      ],
      rightColumnOptions: [
        {
          id: "summary",
          label: "Summary",
        },
      ],
    };
  },

  methods: {
    getAgenda(day) {
      return this.agenda[parseInt(day.weekday, 10)];
    },
    onToday() {
      this.$refs.calendar.moveToToday();
    },
    onPrev() {
      this.$refs.calendar.prev();
    },
    onNext() {
      this.$refs.calendar.next();
    },
    onMoved(data) {
      console.log("onMoved", data);
    },
    onChange(data) {
      console.log("onChange", data);
    },
    onClickDate(data) {
      console.log("onClickDate", data);
    },
    onClickTime(data) {
      console.log("onClickTime", data);
    },
    onClickInterval(data) {
      console.log("onClickInterval", data);
    },
    onClickHeadIntervals(data) {
      console.log("onClickHeadIntervals", data);
    },
    onClickHeadDay(data) {
      console.log("onClickHeadDay", data);
    },
  },
});
</script>
